import{i as v}from"./index-eBEV3ODV.js";import{u as U}from"./user-dSgehscU.js";import{l as y}from"./login_log-wwOim42R.js";import{d as P,r as C,a as g,c as k,b as e,w as a,u as N,e as d,o as B,f as w,g as b,p as T,h as D,_ as L}from"./index-Rub71TYy.js";import"./user-B5O29gJi.js";const O=l=>{const{account:u,password:p}=l;return v({url:"/api/register",method:"POST",data:{account:u,password:p}})},R=l=>{const{account:u,password:p}=l;return v({url:"/api/login",method:"POST",data:{account:u,password:p}})},E=l=>(T("data-v-79ce594a"),l=l(),D(),l),j={class:"card-wrapper"},q=E(()=>w("div",{class:"title"},"后台管理系统",-1)),z={class:"footer-wrapper"},A={class:"footer-wrapper"},F=P({__name:"index",setup(l){const u=N(),p=U(),f=C("first"),m=g({account:null,password:""}),s=g({account:null,password:"",rePassword:""}),I=async()=>{const c=await R(m);if(c.status==0){const{account:o,name:n,email:r,id:i,position:_}=c.results;await y(o,n,r),localStorage.setItem("account",o),localStorage.setItem("name",n),localStorage.setItem("id",i),localStorage.setItem("position",_),p.userInfo(o),u.push("/set")}},S=async()=>{if(s.password==s.rePassword){const c=await O(s);console.log(c),c.status==0&&(f.value="first")}};return(c,o)=>{const n=d("el-input"),r=d("el-form-item"),i=d("el-button"),_=d("el-form"),V=d("el-tab-pane"),h=d("el-tabs"),x=d("el-card");return B(),k("div",j,[e(x,{class:"box-card"},{default:a(()=>[q,e(h,{modelValue:f.value,"onUpdate:modelValue":o[5]||(o[5]=t=>f.value=t),class:"demo-tabs",stretch:!0},{default:a(()=>[e(V,{label:"登录",name:"first"},{default:a(()=>[e(_,{class:"login-form"},{default:a(()=>[e(r,{label:"账号"},{default:a(()=>[e(n,{modelValue:m.account,"onUpdate:modelValue":o[0]||(o[0]=t=>m.account=t),placeholder:"请输入账号"},null,8,["modelValue"])]),_:1}),e(r,{label:"密码"},{default:a(()=>[e(n,{modelValue:m.password,"onUpdate:modelValue":o[1]||(o[1]=t=>m.password=t),placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),w("div",z,[e(i,{type:"primary",onClick:I},{default:a(()=>[b("登录")]),_:1})])]),_:1})]),_:1}),e(V,{label:"注册",name:"second"},{default:a(()=>[e(_,{class:"login-form"},{default:a(()=>[e(r,{label:"账号"},{default:a(()=>[e(n,{modelValue:s.account,"onUpdate:modelValue":o[2]||(o[2]=t=>s.account=t),placeholder:"账号长度6-12位"},null,8,["modelValue"])]),_:1}),e(r,{label:"密码"},{default:a(()=>[e(n,{modelValue:s.password,"onUpdate:modelValue":o[3]||(o[3]=t=>s.password=t),"show-password":"",placeholder:"密码需长度6-12位含字母数字"},null,8,["modelValue"])]),_:1}),e(r,{label:"确认密码"},{default:a(()=>[e(n,{modelValue:s.rePassword,"onUpdate:modelValue":o[4]||(o[4]=t=>s.rePassword=t),"show-password":"",placeholder:"请再次输入密码"},null,8,["modelValue"])]),_:1}),w("div",A,[e(i,{type:"primary",onClick:S},{default:a(()=>[b("注册")]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}}),Q=L(F,[["__scopeId","data-v-79ce594a"]]);export{Q as default};
